<!DOCTYPE html>
<html>
  <head>
    <title>SisSynergiaTesteRails</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>

    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.16.0/jquery.validate.min.js"></script>
  </head>

  <body>
    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
      <h5 class="my-0 mr-md-auto font-weight-normal">Synergia T-shirts</h5>
      <nav class="my-2 my-md-0 mr-md-3">
        <a class="p-2 text-dark" href="<%= available_products_path %>">Produtos</a>
        <a class="p-2 text-dark" href="<%= new_available_product_path %>">Cadastrar</a>
      </nav>
    </div> 
    <div class="container"> 
      <p id="notice"><%= notice %></p> 
      <%= yield %>
    </div>
    <script type="text/javascript">
      $(document).ready(function(){
        $('.quantity_plus').bind("ajax:success", function(data) {
          var $span = $(this).parent().parent().find('.product_quantity');
          var current_quantity = parseInt($span.text());
          $span.text(current_quantity + 1);
        });

        $('.quantity_shift').bind("ajax:success", function(data) {
          var $span = $(this).parent().parent().find('.product_quantity');
          var current_quantity = parseInt($span.text());
          $span.text(current_quantity - 1);
        });
      });
    </script>
  </body>
</html>
